{"ast":null,"code":"var _jsxFileName = \"/home/and/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u0430\\u043F\\u043A\\u0443 6/frontend/src/components/Forms/FormUser/ButtonCreateUserOrder.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { validateFormaUser } from './validateFormaUser';\nimport { useCreateOrder, useCreateUser, useFindUser, useLocalStorageService } from '../../../hooks';\nimport { useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\nconst ButtonCreateUser = _ref => {\n  _s();\n  let {\n    username,\n    email,\n    phone,\n    address,\n    orderAllRemove,\n    removeChange\n  } = _ref;\n  const {\n    createUser\n  } = useCreateUser();\n  const {\n    findOneUser\n  } = useFindUser();\n  const {\n    createOrder\n  } = useCreateOrder();\n  const userOrder = useSelector(state => state.order.userOrder);\n  const onButtonClick = async event => {\n    event.preventDefault();\n    const validate = validateFormaUser({\n      username,\n      phone,\n      email,\n      address\n    });\n    if (validate) {\n      const {\n        ...user\n      } = await createUser({\n        username,\n        email,\n        phone,\n        address\n      });\n      if (user.user_id) {\n        const {\n          ...findUserEmail\n        } = await findOneUser({\n          username,\n          email,\n          phone,\n          address\n        });\n        if (findUserEmail) {\n          for (let i = 0; i < userOrder.length; i++) {\n            await createOrder({\n              ...userOrder[i],\n              user_id: Number(findUserEmail[0].user_id)\n            });\n            const localStorageService = new useLocalStorageService();\n            localStorageService.setItem('', {\n              value: 'myValue'\n            });\n            const myItem = localStorageService.getItem('myKey');\n          }\n        }\n        orderAllRemove();\n        removeChange();\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"rounded-md bg-cyan-300 px-2.5 py-1.5  w-24 text-lg  text-gray-900 shadow-sm ring-1 ring-inset\",\n    onClick: event => onButtonClick(event),\n    children: \"Submit\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(ButtonCreateUser, \"Au4zyR/0NqMu/EWSOSGMrsF7P+w=\", false, function () {\n  return [useCreateUser, useFindUser, useCreateOrder, useSelector];\n});\n_c = ButtonCreateUser;\nexport default ButtonCreateUser;\nvar _c;\n$RefreshReg$(_c, \"ButtonCreateUser\");","map":{"version":3,"names":["React","validateFormaUser","useCreateOrder","useCreateUser","useFindUser","useLocalStorageService","useSelector","jsxDEV","_jsxDEV","ButtonCreateUser","_ref","_s","username","email","phone","address","orderAllRemove","removeChange","createUser","findOneUser","createOrder","userOrder","state","order","onButtonClick","event","preventDefault","validate","user","user_id","findUserEmail","i","length","Number","localStorageService","setItem","value","myItem","getItem","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/and/Рабочий стол/Создать папку 6/frontend/src/components/Forms/FormUser/ButtonCreateUserOrder.tsx"],"sourcesContent":["import React, { FC } from 'react'\nimport { validateFormaUser } from './validateFormaUser';\nimport { useCreateOrder, useCreateUser, useFindUser, useLocalStorageService } from '../../../hooks';\n\nimport {useSelector} from 'react-redux';\nimport { RootState } from '../../../store/store';\nimport { userType } from '../../../types';\n\n\ninterface ButtonType {\n  username: string;\n  email: string;\n  phone: string;\n  address: string;\n  orderAllRemove:() => void;\n  removeChange: () => void\n};\n\nconst ButtonCreateUser:FC<ButtonType> = ({username, email, phone, address, orderAllRemove, removeChange}) => {\n\n  const { createUser } = useCreateUser()\n  const { findOneUser } = useFindUser()\n  const { createOrder } = useCreateOrder()\n\n  const userOrder = useSelector((state: RootState) => state.order.userOrder)\n\n    const onButtonClick = async (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault()\n    const validate = validateFormaUser({username, phone, email, address})\n\n    if(validate){\n      \n    const {...user}: userType = await createUser({ username, email, phone, address })\n\n      if(user.user_id) {\n        const {...findUserEmail}: userType[] = await findOneUser({username,email,phone,address})\n            if (findUserEmail) {\n             for (let i = 0; i < userOrder.length; i++) {\n               await createOrder({ ...userOrder[i], user_id: Number(findUserEmail[0].user_id) })\n\n          const localStorageService = new useLocalStorageService();\n          localStorageService.setItem('', { value: 'myValue' });\n\n\nconst myItem = localStorageService.getItem('myKey');\n              \n             }\n            }\n\n\n\n          orderAllRemove()\n          removeChange()\n           \n          }}\n        }\n           \n  return (\n\n    <button\n    className='rounded-md bg-cyan-300 px-2.5 py-1.5  w-24 text-lg  text-gray-900 shadow-sm ring-1 ring-inset'\n    onClick={(event) => onButtonClick(event)}\n  >\n     Submit\n  </button>\n\n  )}\n\n\n\nexport default ButtonCreateUser"],"mappings":";;AAAA,OAAOA,KAAK,MAAc,OAAO;AACjC,SAASC,iBAAiB,QAAQ,qBAAqB;AACvD,SAASC,cAAc,EAAEC,aAAa,EAAEC,WAAW,EAAEC,sBAAsB,QAAQ,gBAAgB;AAEnG,SAAQC,WAAW,QAAO,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAYvC;AAED,MAAMC,gBAA+B,GAAGC,IAAA,IAAqE;EAAAC,EAAA;EAAA,IAApE;IAACC,QAAQ;IAAEC,KAAK;IAAEC,KAAK;IAAEC,OAAO;IAAEC,cAAc;IAAEC;EAAY,CAAC,GAAAP,IAAA;EAEtG,MAAM;IAAEQ;EAAW,CAAC,GAAGf,aAAa,CAAC,CAAC;EACtC,MAAM;IAAEgB;EAAY,CAAC,GAAGf,WAAW,CAAC,CAAC;EACrC,MAAM;IAAEgB;EAAY,CAAC,GAAGlB,cAAc,CAAC,CAAC;EAExC,MAAMmB,SAAS,GAAGf,WAAW,CAAEgB,KAAgB,IAAKA,KAAK,CAACC,KAAK,CAACF,SAAS,CAAC;EAExE,MAAMG,aAAa,GAAG,MAAOC,KAA0C,IAAK;IAC5EA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,MAAMC,QAAQ,GAAG1B,iBAAiB,CAAC;MAACW,QAAQ;MAAEE,KAAK;MAAED,KAAK;MAAEE;IAAO,CAAC,CAAC;IAErE,IAAGY,QAAQ,EAAC;MAEZ,MAAM;QAAC,GAAGC;MAAc,CAAC,GAAG,MAAMV,UAAU,CAAC;QAAEN,QAAQ;QAAEC,KAAK;QAAEC,KAAK;QAAEC;MAAQ,CAAC,CAAC;MAE/E,IAAGa,IAAI,CAACC,OAAO,EAAE;QACf,MAAM;UAAC,GAAGC;QAAyB,CAAC,GAAG,MAAMX,WAAW,CAAC;UAACP,QAAQ;UAACC,KAAK;UAACC,KAAK;UAACC;QAAO,CAAC,CAAC;QACpF,IAAIe,aAAa,EAAE;UAClB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,SAAS,CAACW,MAAM,EAAED,CAAC,EAAE,EAAE;YACzC,MAAMX,WAAW,CAAC;cAAE,GAAGC,SAAS,CAACU,CAAC,CAAC;cAAEF,OAAO,EAAEI,MAAM,CAACH,aAAa,CAAC,CAAC,CAAC,CAACD,OAAO;YAAE,CAAC,CAAC;YAEtF,MAAMK,mBAAmB,GAAG,IAAI7B,sBAAsB,CAAC,CAAC;YACxD6B,mBAAmB,CAACC,OAAO,CAAC,EAAE,EAAE;cAAEC,KAAK,EAAE;YAAU,CAAC,CAAC;YAG/D,MAAMC,MAAM,GAAGH,mBAAmB,CAACI,OAAO,CAAC,OAAO,CAAC;UAEtC;QACD;QAIFtB,cAAc,CAAC,CAAC;QAChBC,YAAY,CAAC,CAAC;MAEd;IAAC;EACH,CAAC;EAEP,oBAEET,OAAA;IACA+B,SAAS,EAAC,+FAA+F;IACzGC,OAAO,EAAGf,KAAK,IAAKD,aAAa,CAACC,KAAK,CAAE;IAAAgB,QAAA,EAC1C;EAED;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAER,CAAC;AAAAlC,EAAA,CAhDEF,gBAA+B;EAAA,QAEZN,aAAa,EACZC,WAAW,EACXF,cAAc,EAEpBI,WAAW;AAAA;AAAAwC,EAAA,GANzBrC,gBAA+B;AAoDrC,eAAeA,gBAAgB;AAAA,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}