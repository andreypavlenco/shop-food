{"ast":null,"code":"var _jsxFileName = \"/home/and/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u0430\\u043F\\u043A\\u0443 6/frontend/src/components/Forms/FormUser/ButtonCreateUserandOrder.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { validateFormaUser } from './validateFormaUser';\nimport { useCreateOrder, useCreateUser, useFindUser } from '../../../hooks';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { orderAllRemove } from '../../../store/orderSlice';\nimport { removeChange } from '../../../store/userSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n;\nconst ButtonCreateUser = _ref => {\n  _s();\n  let {\n    username,\n    email,\n    phone,\n    address\n  } = _ref;\n  const {\n    createUser\n  } = useCreateUser();\n  const {\n    findOneUser\n  } = useFindUser();\n  const {\n    createOrder\n  } = useCreateOrder();\n  const dispatch = useDispatch();\n  const userOrder = useSelector(state => state.order.userOrder);\n  const onButtonClick = async event => {\n    event.preventDefault();\n    const validate = validateFormaUser({\n      username,\n      phone,\n      email,\n      address\n    });\n    if (validate) {\n      const {\n        ...user\n      } = await createUser({\n        username,\n        email,\n        phone,\n        address\n      });\n      if (user.user_id) {\n        const {\n          ...findUserEmail\n        } = await findOneUser({\n          username,\n          email,\n          phone,\n          address\n        });\n        if (findUserEmail) {\n          for (let i = 0; i < userOrder.length; i++) {\n            await createOrder({\n              ...userOrder[i],\n              user_id: Number(findUserEmail[0].user_id)\n            });\n          }\n        }\n        dispatch(orderAllRemove());\n        dispatch(removeChange());\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"rounded-md bg-cyan-300 px-2.5 py-1.5  w-24 text-lg  text-gray-900 shadow-sm ring-1 ring-inset\",\n    onClick: event => onButtonClick(event),\n    children: \"Submit\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(ButtonCreateUser, \"7nqktCF+/8KTMKLEJ57PmHvpzD8=\", false, function () {\n  return [useCreateUser, useFindUser, useCreateOrder, useDispatch, useSelector];\n});\n_c = ButtonCreateUser;\nexport default ButtonCreateUser;\nvar _c;\n$RefreshReg$(_c, \"ButtonCreateUser\");","map":{"version":3,"names":["React","validateFormaUser","useCreateOrder","useCreateUser","useFindUser","useDispatch","useSelector","orderAllRemove","removeChange","jsxDEV","_jsxDEV","ButtonCreateUser","_ref","_s","username","email","phone","address","createUser","findOneUser","createOrder","dispatch","userOrder","state","order","onButtonClick","event","preventDefault","validate","user","user_id","findUserEmail","i","length","Number","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/and/Рабочий стол/Создать папку 6/frontend/src/components/Forms/FormUser/ButtonCreateUserandOrder.tsx"],"sourcesContent":["import React, { FC } from 'react'\nimport { validateFormaUser } from './validateFormaUser';\nimport { useCreateOrder, useCreateUser, useFindUser } from '../../../hooks';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../../store/store';\nimport { userType } from '../../../types';\nimport { orderAllRemove } from '../../../store/orderSlice';\nimport { removeChange } from '../../../store/userSlice';\n\ninterface ButtonType {\n  username: string;\n  email: string;\n  phone: string;\n  address: string;\n};\n\nconst ButtonCreateUser:FC<ButtonType> = ({username, email, phone, address}) => {\n\n  const { createUser } = useCreateUser()\n  const { findOneUser } = useFindUser()\n  const { createOrder } = useCreateOrder()\n  const dispatch = useDispatch()\n  const userOrder = useSelector((state: RootState) => state.order.userOrder)\n\n    const onButtonClick = async (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault()\n    const validate = validateFormaUser({username, phone, email, address})\n\n    if(validate){\n      \n    const {...user}: userType = await createUser({ username, email, phone, address })\n\n      if(user.user_id) {\n        const {...findUserEmail}: userType[] = await findOneUser({username,email,phone,address})\n            if (findUserEmail) {\n             for (let i = 0; i < userOrder.length; i++) {\n               await createOrder({ ...userOrder[i], user_id: Number(findUserEmail[0].user_id) })\n             }\n            }\n\n           dispatch(orderAllRemove())\n           dispatch(removeChange())\n           \n          }}\n        }\n           \n      \n    \n  return (\n\n    <button\n    className='rounded-md bg-cyan-300 px-2.5 py-1.5  w-24 text-lg  text-gray-900 shadow-sm ring-1 ring-inset'\n    onClick={(event) => onButtonClick(event)}\n  >\n     Submit\n  </button>\n\n  )}\n\n\n\nexport default ButtonCreateUser"],"mappings":";;AAAA,OAAOA,KAAK,MAAc,OAAO;AACjC,SAASC,iBAAiB,QAAQ,qBAAqB;AACvD,SAASC,cAAc,EAAEC,aAAa,EAAEC,WAAW,QAAQ,gBAAgB;AAE3E,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AAGtD,SAASC,cAAc,QAAQ,2BAA2B;AAC1D,SAASC,YAAY,QAAQ,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAOvD;AAED,MAAMC,gBAA+B,GAAGC,IAAA,IAAuC;EAAAC,EAAA;EAAA,IAAtC;IAACC,QAAQ;IAAEC,KAAK;IAAEC,KAAK;IAAEC;EAAO,CAAC,GAAAL,IAAA;EAExE,MAAM;IAAEM;EAAW,CAAC,GAAGf,aAAa,CAAC,CAAC;EACtC,MAAM;IAAEgB;EAAY,CAAC,GAAGf,WAAW,CAAC,CAAC;EACrC,MAAM;IAAEgB;EAAY,CAAC,GAAGlB,cAAc,CAAC,CAAC;EACxC,MAAMmB,QAAQ,GAAGhB,WAAW,CAAC,CAAC;EAC9B,MAAMiB,SAAS,GAAGhB,WAAW,CAAEiB,KAAgB,IAAKA,KAAK,CAACC,KAAK,CAACF,SAAS,CAAC;EAExE,MAAMG,aAAa,GAAG,MAAOC,KAA0C,IAAK;IAC5EA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,MAAMC,QAAQ,GAAG3B,iBAAiB,CAAC;MAACa,QAAQ;MAAEE,KAAK;MAAED,KAAK;MAAEE;IAAO,CAAC,CAAC;IAErE,IAAGW,QAAQ,EAAC;MAEZ,MAAM;QAAC,GAAGC;MAAc,CAAC,GAAG,MAAMX,UAAU,CAAC;QAAEJ,QAAQ;QAAEC,KAAK;QAAEC,KAAK;QAAEC;MAAQ,CAAC,CAAC;MAE/E,IAAGY,IAAI,CAACC,OAAO,EAAE;QACf,MAAM;UAAC,GAAGC;QAAyB,CAAC,GAAG,MAAMZ,WAAW,CAAC;UAACL,QAAQ;UAACC,KAAK;UAACC,KAAK;UAACC;QAAO,CAAC,CAAC;QACpF,IAAIc,aAAa,EAAE;UAClB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,SAAS,CAACW,MAAM,EAAED,CAAC,EAAE,EAAE;YACzC,MAAMZ,WAAW,CAAC;cAAE,GAAGE,SAAS,CAACU,CAAC,CAAC;cAAEF,OAAO,EAAEI,MAAM,CAACH,aAAa,CAAC,CAAC,CAAC,CAACD,OAAO;YAAE,CAAC,CAAC;UACnF;QACD;QAEDT,QAAQ,CAACd,cAAc,CAAC,CAAC,CAAC;QAC1Bc,QAAQ,CAACb,YAAY,CAAC,CAAC,CAAC;MAEzB;IAAC;EACH,CAAC;EAIP,oBAEEE,OAAA;IACAyB,SAAS,EAAC,+FAA+F;IACzGC,OAAO,EAAGV,KAAK,IAAKD,aAAa,CAACC,KAAK,CAAE;IAAAW,QAAA,EAC1C;EAED;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAER,CAAC;AAAA5B,EAAA,CAzCEF,gBAA+B;EAAA,QAEZR,aAAa,EACZC,WAAW,EACXF,cAAc,EACrBG,WAAW,EACVC,WAAW;AAAA;AAAAoC,EAAA,GANzB/B,gBAA+B;AA6CrC,eAAeA,gBAAgB;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}