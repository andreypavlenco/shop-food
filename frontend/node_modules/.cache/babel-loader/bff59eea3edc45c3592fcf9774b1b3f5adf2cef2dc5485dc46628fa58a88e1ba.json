{"ast":null,"code":"var _jsxFileName = \"/home/and/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u0430\\u043F\\u043A\\u0443 6/frontend/src/components/FormUser/ButtonCreateUserOrder.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useCreateOrder, useCreateUser, useFindUser, useLocalStorageService } from '../../hooks';\nimport { useSelector } from 'react-redux';\nimport { validateFormUser } from '../../helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ButtonCreateUser = _ref => {\n  _s();\n  let {\n    username,\n    email,\n    phone,\n    address,\n    orderAllRemove,\n    removeChange\n  } = _ref;\n  const {\n    createUser\n  } = useCreateUser();\n  const {\n    findOneUser\n  } = useFindUser();\n  const {\n    createOrder\n  } = useCreateOrder();\n  const userOrder = useSelector(state => state.order.userOrder);\n  const onButtonClick = async event => {\n    event.preventDefault();\n    const validate = validateFormUser({\n      username,\n      phone,\n      email,\n      address\n    });\n    if (validate) {\n      const {\n        ...user\n      } = await createUser({\n        username,\n        email,\n        phone,\n        address\n      });\n      if (user.user_id) {\n        const {\n          ...findUserEmail\n        } = await findOneUser({\n          username,\n          email,\n          phone,\n          address\n        });\n        if (findUserEmail) {\n          for (let i = 0; i < userOrder.length; i++) {\n            await createOrder({\n              ...userOrder[i],\n              user_id: Number(findUserEmail[0].user_id)\n            });\n            const createOderLocal = await createOrder({\n              ...userOrder[i],\n              user_id: Number(findUserEmail[0].user_id)\n            });\n            const localStorageService = new useLocalStorageService();\n            localStorageService.setItem('userOrder', {\n              createOderLocal\n            });\n          }\n        }\n        orderAllRemove();\n        removeChange();\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"rounded-md bg-cyan-300 px-2.5 py-1.5  w-24 text-lg  text-gray-900 shadow-sm ring-1 ring-inset\",\n    onClick: event => onButtonClick(event),\n    children: \"Submit\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(ButtonCreateUser, \"Au4zyR/0NqMu/EWSOSGMrsF7P+w=\", false, function () {\n  return [useCreateUser, useFindUser, useCreateOrder, useSelector];\n});\n_c = ButtonCreateUser;\nexport default ButtonCreateUser;\nvar _c;\n$RefreshReg$(_c, \"ButtonCreateUser\");","map":{"version":3,"names":["React","useCreateOrder","useCreateUser","useFindUser","useLocalStorageService","useSelector","validateFormUser","jsxDEV","_jsxDEV","ButtonCreateUser","_ref","_s","username","email","phone","address","orderAllRemove","removeChange","createUser","findOneUser","createOrder","userOrder","state","order","onButtonClick","event","preventDefault","validate","user","user_id","findUserEmail","i","length","Number","createOderLocal","localStorageService","setItem","className","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/and/Рабочий стол/Создать папку 6/frontend/src/components/FormUser/ButtonCreateUserOrder.tsx"],"sourcesContent":["import React, { FC } from 'react'\n\nimport { useCreateOrder, useCreateUser, useFindUser, useLocalStorageService } from '../../hooks'\n\nimport { useSelector } from 'react-redux'\nimport { RootState } from '../../store/store'\nimport { userType } from '../../types'\nimport { validateFormUser } from '../../helpers'\n\ninterface ButtonProps {\n  username: string\n  email: string\n  phone: string\n  address: string\n  orderAllRemove: () => void\n  removeChange: () => void\n}\n\nconst ButtonCreateUser: FC<ButtonProps> = ({\n  username,\n  email,\n  phone,\n  address,\n  orderAllRemove,\n  removeChange,\n}) => {\n  const { createUser } = useCreateUser()\n  const { findOneUser } = useFindUser()\n  const { createOrder } = useCreateOrder()\n\n  const userOrder = useSelector((state: RootState) => state.order.userOrder)\n\n  const onButtonClick = async (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault()\n    const validate = validateFormUser({ username, phone, email, address })\n\n    if (validate) {\n      const { ...user }: userType = await createUser({ username, email, phone, address })\n\n      if (user.user_id) {\n        const { ...findUserEmail }: userType[] = await findOneUser({\n          username,\n          email,\n          phone,\n          address,\n        })\n        if (findUserEmail) {\n          for (let i = 0; i < userOrder.length; i++) {\n            await createOrder({ ...userOrder[i], user_id: Number(findUserEmail[0].user_id) })\n            const createOderLocal = await createOrder({\n              ...userOrder[i],\n              user_id: Number(findUserEmail[0].user_id),\n            })\n            const localStorageService = new useLocalStorageService()\n            localStorageService.setItem('userOrder', { createOderLocal })\n          }\n        }\n        orderAllRemove()\n        removeChange()\n      }\n    }\n  }\n\n  return (\n    <button\n      className='rounded-md bg-cyan-300 px-2.5 py-1.5  w-24 text-lg  text-gray-900 shadow-sm ring-1 ring-inset'\n      onClick={(event) => onButtonClick(event)}\n    >\n      Submit\n    </button>\n  )\n}\n\nexport default ButtonCreateUser\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAc,OAAO;AAEjC,SAASC,cAAc,EAAEC,aAAa,EAAEC,WAAW,EAAEC,sBAAsB,QAAQ,aAAa;AAEhG,SAASC,WAAW,QAAQ,aAAa;AAGzC,SAASC,gBAAgB,QAAQ,eAAe;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAWhD,MAAMC,gBAAiC,GAAGC,IAAA,IAOpC;EAAAC,EAAA;EAAA,IAPqC;IACzCC,QAAQ;IACRC,KAAK;IACLC,KAAK;IACLC,OAAO;IACPC,cAAc;IACdC;EACF,CAAC,GAAAP,IAAA;EACC,MAAM;IAAEQ;EAAW,CAAC,GAAGhB,aAAa,CAAC,CAAC;EACtC,MAAM;IAAEiB;EAAY,CAAC,GAAGhB,WAAW,CAAC,CAAC;EACrC,MAAM;IAAEiB;EAAY,CAAC,GAAGnB,cAAc,CAAC,CAAC;EAExC,MAAMoB,SAAS,GAAGhB,WAAW,CAAEiB,KAAgB,IAAKA,KAAK,CAACC,KAAK,CAACF,SAAS,CAAC;EAE1E,MAAMG,aAAa,GAAG,MAAOC,KAA0C,IAAK;IAC1EA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtB,MAAMC,QAAQ,GAAGrB,gBAAgB,CAAC;MAAEM,QAAQ;MAAEE,KAAK;MAAED,KAAK;MAAEE;IAAQ,CAAC,CAAC;IAEtE,IAAIY,QAAQ,EAAE;MACZ,MAAM;QAAE,GAAGC;MAAe,CAAC,GAAG,MAAMV,UAAU,CAAC;QAAEN,QAAQ;QAAEC,KAAK;QAAEC,KAAK;QAAEC;MAAQ,CAAC,CAAC;MAEnF,IAAIa,IAAI,CAACC,OAAO,EAAE;QAChB,MAAM;UAAE,GAAGC;QAA0B,CAAC,GAAG,MAAMX,WAAW,CAAC;UACzDP,QAAQ;UACRC,KAAK;UACLC,KAAK;UACLC;QACF,CAAC,CAAC;QACF,IAAIe,aAAa,EAAE;UACjB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,SAAS,CAACW,MAAM,EAAED,CAAC,EAAE,EAAE;YACzC,MAAMX,WAAW,CAAC;cAAE,GAAGC,SAAS,CAACU,CAAC,CAAC;cAAEF,OAAO,EAAEI,MAAM,CAACH,aAAa,CAAC,CAAC,CAAC,CAACD,OAAO;YAAE,CAAC,CAAC;YACjF,MAAMK,eAAe,GAAG,MAAMd,WAAW,CAAC;cACxC,GAAGC,SAAS,CAACU,CAAC,CAAC;cACfF,OAAO,EAAEI,MAAM,CAACH,aAAa,CAAC,CAAC,CAAC,CAACD,OAAO;YAC1C,CAAC,CAAC;YACF,MAAMM,mBAAmB,GAAG,IAAI/B,sBAAsB,CAAC,CAAC;YACxD+B,mBAAmB,CAACC,OAAO,CAAC,WAAW,EAAE;cAAEF;YAAgB,CAAC,CAAC;UAC/D;QACF;QACAlB,cAAc,CAAC,CAAC;QAChBC,YAAY,CAAC,CAAC;MAChB;IACF;EACF,CAAC;EAED,oBACET,OAAA;IACE6B,SAAS,EAAC,+FAA+F;IACzGC,OAAO,EAAGb,KAAK,IAAKD,aAAa,CAACC,KAAK,CAAE;IAAAc,QAAA,EAC1C;EAED;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAQ,CAAC;AAEb,CAAC;AAAAhC,EAAA,CArDKF,gBAAiC;EAAA,QAQdP,aAAa,EACZC,WAAW,EACXF,cAAc,EAEpBI,WAAW;AAAA;AAAAuC,EAAA,GAZzBnC,gBAAiC;AAuDvC,eAAeA,gBAAgB;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}